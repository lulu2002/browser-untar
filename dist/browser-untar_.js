!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("browser-untar",[],r):"object"==typeof exports?exports["browser-untar"]=r():e["browser-untar"]=r()}(this,function(){return function(t){var o={};function n(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=o,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)n.d(t,o,function(e){return r[e]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.r(r);var c=function(){var e,r,t;function o(){var t=this;n(this,o),u(this,"trimWorkerPool",function(){for(;t._workerPool.length>o._desiredWorkerPoolLength;){var e=t._workerPool.pop();void 0!==e&&e.terminate()}}),u(this,"initializeWorkerPool",function(){for(var e=0;e<o._desiredWorkerPoolLength;++e){var r=new Worker(t._workerCode);t._workerPool.push(r)}}),u(this,"requestWorker",function(){var e;return void 0===(e=t._workerPool.shift())&&(e=new Worker(t._workerCode)),e}),u(this,"returnWorker",function(e){t._workerPool.push(e)}),u(this,"untar",function(e){if(!(e instanceof ArrayBuffer))throw new TypeError("arrayBuffer is not an instance of ArrayBuffer.");var n=t.requestWorker(),i=[],r=new Promise(function(t,o){n.onerror=function(e){return o(e)},n.onmessage=function(e){var r=e.data;switch(r.type){case"l":console[r.level]("Worker: ".concat(r.message));break;case"e":i.push(new a(r.data));break;case"c":t(i);break;default:console.error("Unknown worker message!"),n.terminate(),void 0!==r.message?o(new Error(r.message)):o(new Error("Unknown worker message: ".concat(r.type)))}}}).finally(function(){i=void 0,n.onerror=void 0,n.onmessage=void 0,t.returnWorker(n),n=void 0});return n.postMessage({type:"e",buffer:e},[e]),r}),this._workerCode=window.URL.createObjectURL(new Blob(["__replace__string__"])),this._workerPool=[],this.initializeWorkerPool(),this._workerTrimInterval=setInterval(this.trimWorkerPool,o._workerTrimInterval)}return e=o,t=[{key:"instance",value:function(){if(void 0===o._instance){if(!window.Worker)throw new Error("No Worker implementation found.");o._instance=new o}return o._instance}}],(r=null)&&i(e.prototype,r),t&&i(e,t),o}();u(c,"_instance",void 0),u(c,"_desiredWorkerPoolLength",0),u(c,"_workerTrimInterval",2e3),u(c,"CHUNK_SIZE",1024);var a=function e(r){var f=this;n(this,e),u(this,"readAsString",function(){if(void 0!==("undefined"==typeof TextDecoder?"undefined":s(TextDecoder)))return new TextDecoder("utf-8").decode(f.buffer);for(var e=f.buffer,r=e.byteLength,t=new DataView(e),o=new Array(r),n=0;n<r;++n)o[n]=t.getUint8(n,!0);for(var i="";0<o.length;){var u=o.splice(0,c.CHUNK_SIZE),a=String.fromCharCode.apply(null,u);i=i.concat(a)}return i}),u(this,"readAsJson",function(){return JSON.parse(f.readAsString())}),u(this,"blob",function(){return new Blob([f.buffer])}),this.buffer=r.buffer,this.name=r.name,this.checksum=r.checksum,this.gid=r.gid,this.linkname=r.linkname,this.mode=r.mode,this.mtime=r.mtime,this.size=r.size,this.type=r.type,this.uid=r.uid,this.ustarFormat=r.ustarFormat};r.default=c}])});